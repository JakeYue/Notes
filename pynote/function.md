函数的作用: 代码封装,高效的代码复用.

![截屏2021-09-21 下午4.05.38](https://cdn.jsdelivr.net/gh/JakeYue/picgo@master/uPic/%E6%88%AA%E5%B1%8F2021-09-21%20%E4%B8%8B%E5%8D%884.05.382021%2009%2021%2018%2029.png)

#### 定义函数

```python
# 定义函数
def 函数名 (参数):
    code....1
    code...2
    .......

```

---

#### 调用函数

```python
函数名(参数)
In [1]: def info_print():
   ...:     print("123")
   ...:

In [2]: info_print()
123
```

> 注意:

		1. 不同需求参数可有可无.
		2. python中,函数必须先定义后使用

---

* 函数先定义后调用,反之会报错
* 如果没有调用函数,函数体内的代码不会被执行
* **函数执行流程**: 当调用函数时,解释器会回到定义函数的位置并执行函数体内的代码,当代码执行完毕后,解释器会回到调用函数的地方继续向下执行.

#### 参数

参数的作用: 使函数更灵活和适用更多场景下函数的使用.

* 定义函数的参数一般称为形参

    1. 必要参数: 必需参数须以正确的顺序传入函数。调用时的数量必须和声明时的一样.

        ```python
        def num (a):
            print(a)
            return
        a = 2
        num(2)
        ```

    2. 关键字参数: 关键字参数和函数调用关系紧密，函数调用使用关键字参数来确定传入的参数值,可以与声明时的顺序不一样.

        ```python
         def num (a, b):
              print(a)
             print(b)
             return
        
        In [12]: num(b=2, a=1)
        1
        2
        ```

    3. 默认参数: 调用函数时，如果没有传递参数，则会使用默认参数.
        - 定义默认参数要牢记一点：默认参数必须指向不变对象！

    ```python
    def num (a, b=2):
        print(a)
        print(b)
        return
    In [14]: num(a=2, b=5)
    2
    5
    In [16]: num(a=2)
    2
    2
    ```

    4. 可变参数: 可能需要一个函数能处理比当初声明时更多的参数。这些参数叫做不定长参数，和上述 2 种参数不同，声明时不会命名.

    ```python
    # 不定长参数已*或者**开头: *args **kwargs
    def num(x, *y):
        print(x)
        print(y)
    # *args开头的参数,变量以元组的形式传入
    def num(x, *y):
        print(x)
        print(y)
     
    a = 5
    b = 2
    c = 0 
    f5 = num(a, b, c)
    2
    (2, 0)
    # **kwargs 开头的参数,变量以字典形式传入
    def num(x, *y):
        print(x)
        print(y)
     
    a = 5
    f6 = num(a, b=2, c= 4)
    5
    {'b': 2, 'c' = 0}
    ```

5. 命名关键字参数:对于关键字参数，函数的调用者可以传入任意不受限制的关键字参数。至于到底传入了哪些，就需要在函数内部通过`kw`检查,如果要限制关键字参数的名字，就可以用命名关键字参数

    - 和关键字参数`**kw`不同，命名关键字参数需要一个特殊分隔符`*`，`*`后面的参数被视为命名关键字参数.

        ```python
        def person(name, age, *, city, job):
            print(name, age, city, job)
        ```

        

    - 如果函数定义中已经有了一个可变参数，后面跟着的命名关键字参数就不再需要一个特殊分隔符`*`了.

        ```python
        def person(name, age, *args, city, job):
            print(name, age, args, city, job)
        ```

        

    - 使用命名关键字参数时，要特别注意，如果没有可变参数，就必须加一个`*`作为特殊分隔符。如果缺少`*`，Python解释器将无法识别位置参数和命名关键字参数.

        ```python
        def person(name, age, city, job):
            # 缺少 *，city和job被视为位置参数
            pass
        ```

        

**参数定义顺序:必选参数、默认参数、可变参数、命名关键字参数和关键字参数**

* 调用函数的参数一般称为实参: 实参传入要根据声明形参的具体需求传入具体数据
* 站在实参的角度分为：位置传参，关键字传参，混合传参
* Python函数中参数传递根据传入的数据类型，有对应的规则：
    - **不可变数据类型**：不可变数据类型（数字、字符串和元组）只是将变量名指向的对象（也就是具体的数值）传递给函数中的参数，不影响变量名本身的指向；
    - **可变数据类型**：可变数据类型则是将变量名和指向的值都传给函数的参数。

#### 匿名函数

 python 使用 lambda 来创建匿名函数。所谓匿名，意即不再使用 def 语句这样标准的形式定义一个函数。

- lambda 只是一个表达式，函数体比 def 简单很多。

- lambda的主体是一个表达式，而不是一个代码块。仅仅能在lambda表达式中封装有限的逻辑进去。

- lambda 函数拥有自己的命名空间，且不能访问自己参数列表之外或全局命名空间里的参数。

- 虽然lambda函数看起来只能写一行，却不等同于C或C++的内联函数，后者的目的是调用小函数时不占用栈内存从而增加运行效率。

    ```python
    # 语法
    lambda [arg1 [,arg2,.....argn]]:expression
    ```

    ```python 
    sum = lambda arg1, arg2: arg1 + arg2
    print ("相加后的值为 : ", sum( 10, 20 ))
    # 相加后的值为 :  30
    ```

#### 空函数

	- 用关键字pass 来声明一个函数为空的什么都不做的函数,为后续需要做备份.

```python
def passn ():
    pass
```

#### 递归函数

- 在函数内部，可以调用其他函数。如果一个函数在内部调用自身本身，这个函数就是递归函数.

    ```python
    # 阶乘
    def fact(n):
        if n==1:
            return 1
        return n * fact(n - 1)
    # 使用递归函数的优点是逻辑简单清晰，缺点是过深的调用会导致栈溢出.
    # 解决递归调用栈溢出的方法是通过尾递归优化
    # 尾递归是指，在函数返回的时候，调用自身本身，并且，return语句不能包含表达式
    def fact_iter(num, product):
        if num == 1:
            return product
        return fact_iter(num - 1, num * product)
    # Python标准的解释器没有针对尾递归做优化，任何递归函数都存在栈溢出的问题
    ```

#### 变量作用域

- 每个变量都有自己的作用范围，变量根据其作用范围可以分为两种：

    - 全局变量：变量从创建开始直到程序结束才消失；

        ```python
        a =1 
        def num ():
            pass
        ```

        

    - 局部变量：创建的变量只在某个代码块中才生效.

        ```python
        def num ():
            a =1
            pass
        ```

    - 使用global 来声明使一个局部变量申明成全局变量.

        ```python
        a =1
        def num ():
            global a
            a =1
            pass
        ```

#### 函数的返回值

- return 的作用停止函数体的运行。和break的功能一样。并且返回给这个函数一个值

    1. return 空或者没有return时，返回值为None.

        ```python
        def num ():
            a = 1
            return 
        ```

    2. return 加一个值，返回给函数这个值，这个值是什么类型就返回什么类型.

        ```python
        def num ():
            a = 1
            return a
        ```

    3. return 加多个值是，返回给函数一个由这些值组成的元组.

        ```python
        def num ():
            a = 1
            b = 2
            return a, b
        (1, 2)
        ```

    4. return 后面可以加元组、字典、列表来返回对应的数据类型的值.

        ```python
        def num ():
            a = 1
            b = 2
            return a, b #(a, b) 
        	return [a, b]
        	return {"x":a, "y":b}
        (1, 2)
        [1, 2]
        {'x': 1, 'y': 2}
        ```

        



#### 强制位置参数

- Python3.8 新增了一个函数形参语法 / 用来指明函数形参必须使用指定位置参数，不能使用关键字参数的形式

    ```python
    def f(a, b, /, c, d, *, e, f):
        print(a, b, c, d, e, f)
        
    # 形参 a 和 b 必须使用指定位置参数，c 或 d 可以是位置形参或关键字形参，而 e 和 f 要求为关键字形参.
    ```

    